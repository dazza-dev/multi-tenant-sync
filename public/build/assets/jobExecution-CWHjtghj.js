import{d as l}from"./app-DCKOvwse.js";import{a as n}from"./axios-Dh4MC8Fy.js";const h=l({id:"JobExecution",state:()=>({loading:!1,jobExecution:{},jobExecutions:[],jobExecutionsLogs:[],jobsAvailable:[],totalItems:0}),getters:{},actions:{async getJobsAvailable(){this.loading=!0;try{const o=await n.get("jobs-available");return this.jobsAvailable=o.data.jobsAvailable,o}catch(o){throw console.error("Error fetching jobs available:",o),o}finally{this.loading=!1}},async getJobExecutions({projectId:o,page:t,itemsPerPage:e,search:r,sortColumn:s,sortDirection:c}){this.loading=!0;try{const a=await n.get("job-executions/"+o,{params:{page:t,per_page:e,search:r,sortColumn:s,sortDirection:c}});return this.jobExecutions=a.data.data,this.totalItems=a.data.total,a}catch(a){throw console.error("Error fetching job executions:",a),a}finally{this.loading=!1}},async getJobExecutionsLogs({jobExecutionId:o,page:t,itemsPerPage:e,search:r,sortColumn:s,sortDirection:c,status:a}){this.loading=!0;try{const i=await n.get("job-executions/logs/"+o,{params:{page:t,per_page:e,search:r,sortColumn:s,sortDirection:c,status:a}});return this.jobExecutionsLogs=i.data.data,this.totalItems=i.data.total,i}catch(i){throw console.error("Error fetching job executions logs:",i),i}finally{this.loading=!1}},async getJobExecutionById(o){this.loading=!0;try{const t=await n.get("job-executions/show/"+o);return this.jobExecution=t.data.jobExecution,t}catch(t){throw console.error("Error fetching the job execution:",t),t}finally{this.loading=!1}},async executeJob(o,t,e,r){this.loading=!0;try{return{success:!0,jobExecution:(await n.post("execute-job/"+o,{job:t,name:e,params:r})).data.jobExecution}}catch(s){throw console.error("Error executing job:",s),s}finally{this.loading=!1}},async exportToExcel(o,t){this.loading=!0;try{const e=await n.get("job-executions/export/"+o,{responseType:"blob",params:t}),r=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=document.createElement("a");return s.href=window.URL.createObjectURL(r),s.download="export.csv",s.click(),e.data}catch(e){throw console.error("Error executing job:",e),e}finally{this.loading=!1}},reset(){this.jobExecution={},this.jobExecutions=[],this.jobExecutionsLogs=[],this.jobsAvailable=[],this.totalItems=0}}});export{h as u};
